# Техническое задание: Бэкенд-сервис для электронной коммерции

## Общая информация

Это задание предполагает создание бэкенд-сервиса для системы электронной коммерции с использованием .NET Core и Entity Framework Core. Вы разработаете набор API для управления клиентами, заказами, деталями заказов и товарами. Проект поможет вам понять структуру приложений в .NET Core, реализовать CRUD-операции и организовать сервисные слои.

## Цели

- Реализовать CRUD-операции для каждой сущности.
- Применять лучшие практики использования EF Core.
- Освоить сервисно-ориентированную архитектуру в .NET Core.
- Получить опыт моделирования данных и управления базой данных.

## Инструменты и технологии

- .NET Core 8  
- Entity Framework Core  
- PostgreSQL или другая совместимая СУБД  
- Visual Studio или VS Code  

## Сущности

### Клиент (Customer)
- `Id` (GUID)
- `Name` (строка)
- `Email` (строка)
- `RegisteredOn` (DateTime)

### Товар (Product)
- `Id` (GUID)
- `Name` (строка)
- `Description` (строка)
- `Price` (decimal)

### Заказ (Order)
- `Id` (GUID)
- `CustomerId` (GUID) — внешний ключ
- `OrderDate` (DateTime)
- `TotalAmount` (decimal) — вычисляемое поле

### Детали заказа (OrderDetail)
- `Id` (GUID)
- `OrderId` (GUID) — внешний ключ
- `ProductId` (GUID) — внешний ключ
- `Quantity` (int)
- `Price` (decimal) — фиксируется из таблицы продуктов на момент создания заказа

## ER-диаграмма (Mermaid)

\`\`\`mermaid
erDiagram
    Customer ||--o{ Order : "оформляет"
    Order ||--o{ OrderDetail : "содержит"
    Product ||--o{ OrderDetail : "включён в"

    Customer {
        guid Id "Уникальный идентификатор"
        string Name "Имя клиента"
        string Email "Электронная почта"
        datetime RegisteredOn "Дата регистрации"
    }

    Product {
        guid Id "Уникальный идентификатор"
        string Name "Название товара"
        string Description "Описание"
        decimal Price "Цена за единицу"
    }

    Order {
        guid Id "Уникальный идентификатор"
        guid CustomerId "Ссылка на клиента"
        datetime OrderDate "Дата оформления"
        decimal TotalAmount "Общая сумма"
    }

    OrderDetail {
        guid Id "Уникальный идентификатор"
        guid OrderId "Ссылка на заказ"
        guid ProductId "Ссылка на товар"
        int Quantity "Количество"
        decimal Price "Цена на момент заказа"
    }
\`\`\`

## Сервисные слои

Каждый сервисный слой должен содержать бизнес-логику для своей сущности.

### OrderService
- `PlaceOrder` — создать заказ и его детали
- `CancelOrder` — отменить заказ
- `UpdateOrder` — обновить детали заказа
- `GetOrder` — получить детали заказа

### CustomerService
- `AddCustomer` — добавить клиента
- `UpdateCustomer` — обновить данные клиента
- `DeleteCustomer` — удалить клиента
- `GetCustomer` — получить информацию о клиенте

### ProductService
- `AddProduct` — добавить товар
- `UpdateProduct` — обновить информацию о товаре
- `DeleteProduct` — удалить товар
- `GetProduct` — получить информацию о товаре

## Требования

### Настройка базы данных
- Используйте EF Core Migrations для создания схемы базы данных.
- Инициализируйте базу тестовыми данными (seed).

### Разработка API
- Реализуйте API для всех CRUD-операций по каждой сущности.

### Обработка исключений
- Настройте глобальную обработку ошибок.

### Логирование
- Используйте встроенные средства логирования для записи важных событий и ошибок.

### Валидация
- Проверяйте входные данные перед выполнением операций.

### Документация
- Используйте Swagger для документирования API.

## Инструкция по отправке

- Отправьте проект в виде репозитория на GitHub с полным исходным кодом.
- Добавьте файл `README.md` с инструкцией по запуску и кратким описанием методов сервисов.

## Критерии оценки

- Организация и качество кода.
- Корректная реализация CRUD и сервисных слоёв.
- Эффективное использование возможностей EF Core.
- Обработка исключений и граничных ситуаций.